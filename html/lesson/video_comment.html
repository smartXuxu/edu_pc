<!DOCTYPE html>
<html>
<head lang="en">
    <link rel="shortcut icon " type="images/x-icon" href="../../ico.ico">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>教师动态主页</title>
    <!-- Bootstrap -->
    <link href="../../css/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/mui.min.css" rel="stylesheet">
    <link href="../../css/mui_img.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/sweetalert2.css" rel="stylesheet">
    <link href="../../css/iconfont.css" rel="stylesheet">
    <link href="../../css/index/teacher_dynamic.css" rel="stylesheet">
    <link href="../../css/lesson/video_comment.css" rel="stylesheet">

</head>
<body>
<div class="layer">
    <div class="header"></div>
    <div class="main">
        <div class="content p_center clearfix">
            <h5>当前位置：首页>课堂>评论</h5>
        </div>
        <div id="comment" class="p_center">
            <nav>
                <ul>
                 <!--   <li>
                        <div class="commentcontent">
                            <div class="f_left comment-portrait">
                                <img src="../../img/focus-img1.png" alt="" class="comment-portrait" />
                            </div>
                            <div>
                                熊宝宝
                            </div>
                            <div class="comment-time">
                                两天前
                            </div>
                        </div>
                        &lt;!&ndash;分享的文本&ndash;&gt;
                        <div class="comment-text">
                            很喜欢老师讲的课，上课幽默又非常的认真，又不懂的老师会很耐心的帮助解答。非常好！
                        </div>
                    </li>
                    <li>
                        <div class="commentcontent">
                            <div class="f_left comment-portrait">
                                <img src="../../img/focus-img1.png" alt="" class="comment-portrait" />
                            </div>
                            <div>
                                熊宝宝
                            </div>
                            <div class="comment-time">
                                两天前
                            </div>
                        </div>
                        &lt;!&ndash;分享的文本&ndash;&gt;
                        <div class="comment-text">
                            很喜欢老师讲的课，上课幽默又非常的认真，又不懂的老师会很耐心的帮助解答。非常好！
                        </div>
                    </li>
                    <li>
                        <div class="commentcontent">
                            <div class="f_left comment-portrait">
                                <img src="../../img/focus-img1.png" alt="" class="comment-portrait" />
                            </div>
                            <div>
                                熊宝宝
                            </div>
                            <div class="comment-time">
                                两天前
                            </div>
                        </div>
                        &lt;!&ndash;分享的文本&ndash;&gt;
                        <div class="comment-text">
                            很喜欢老师讲的课，上课幽默又非常的认真，又不懂的老师会很耐心的帮助解答。非常好！
                        </div>
                    </li>
                    <li>
                        <div class="commentcontent">
                            <div class="f_left comment-portrait">
                                <img src="../../img/focus-img1.png" alt="" class="comment-portrait" />
                            </div>
                            <div>
                                熊宝宝
                            </div>
                            <div class="comment-time">
                                两天前
                            </div>
                        </div>
                        &lt;!&ndash;分享的文本&ndash;&gt;
                        <div class="comment-text">
                            很喜欢老师讲的课，上课幽默又非常的认真，又不懂的老师会很耐心的帮助解答。非常好！
                        </div>
                    </li>
                    <li>
                        <div class="commentcontent">
                            <div class="f_left comment-portrait">
                                <img src="../../img/focus-img1.png" alt="" class="comment-portrait" />
                            </div>
                            <div>
                                熊宝宝
                            </div>
                            <div class="comment-time">
                                两天前
                            </div>
                        </div>
                        &lt;!&ndash;分享的文本&ndash;&gt;
                        <div class="comment-text">
                            很喜欢老师讲的课，上课幽默又非常的认真，又不懂的老师会很耐心的帮助解答。非常好！
                        </div>
                    </li>
                    <li>
                        <div class="commentcontent">
                            <div class="f_left comment-portrait">
                                <img src="../../img/focus-img1.png" alt="" class="comment-portrait" />
                            </div>
                            <div>
                                熊宝宝
                            </div>
                            <div class="comment-time">
                                两天前
                            </div>
                        </div>
                        &lt;!&ndash;分享的文本&ndash;&gt;
                        <div class="comment-text">
                            很喜欢老师讲的课，上课幽默又非常的认真，又不懂的老师会很耐心的帮助解答。非常好！
                        </div>
                    </li>-->
                </ul>
            </nav>
        </div>
        <div class="page p_center">
            <nav aria-label="Page navigation" class="Page">
                <ul class="pagination">
                    <li>
                        <a href="#" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li><a href="#">1</a></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><a href="#">5</a></li>
                    <li>
                        <a href="#" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>

    </div>
    <div class="footer"></div>
</div>
</body>
<!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
<!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
<!--[if lt IE 9]>
<script src="../../js/bootstrap/html5shiv.main.js"></script>
<script src="../../js/bootstrap/respond.min.js"></script>
<![endif]-->
<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="../../js/jquery.min.js"></script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="../../js/bootstrap/bootstrap.min.js"></script>
<script src="../../js/base.js"></script>
<script src="../../js/mui.min.js"></script>
<script src="../../js/mui.zoom.js"></script>
<script src="../../js/mui.preview.js"></script>
<script src="../../js/sweetalert2.js"></script>
<script>
    $(function () {
        mui.previewImage();
        mui('body').on('tap','a',function(){document.location.href=this.href;});
        setTimeout(function () {
            $(".header").load("../common/header_logo.html");
            $(".footer").load("../common/footer.html");
        },100);
        //、、获取视频评论
        var courseid=location.href.split("=")[1];
        video_comment(1);
        function video_comment(page){
            myAjax({url:"/course/related/get/Course/CommentsList",
                data:{courseid:courseid,size:4,page:page},
                type:"post"}, function (data) {
                console.log(data);
                function timeT(time){
                    var timestamp=new Date().getTime();//当前时间戳
                    var kk=timestamp-time;//发表时的时间戳
                    var timea="";
                    var sec=parseInt(kk/1000);//秒
                    var min=parseInt(sec/60);//分
                    var hour=parseInt(min/60);//时
                    var day=parseInt(hour/24);//天
                    if(sec<60){
                        timea=sec+"秒前";
                    }else if(min<60){
                        timea=min+"分钟前";
                    }else if(hour<24){
                        timea=hour+"小时前";
                    }else if(day<7){
                        timea=day+"天前";
                    }else{
                        timea=new Date(time).toLocaleString().replace(/:\d{1,2}$/,' ').replace(/\//g,"-");
                    }
                    return timea;
                }
                if(data.status==200){
                    var data=data.data;
                    if(data==null||data.length==0||data==""){
                        $("#comment>nav>ul").html(`<div class="no_in">对不起，当前视频暂时没有任何的评论</div>`)
                    }else{
                        var html=``;
                        for(var i=0;i<data.length;i++){
                            if(data[i].user.portrait==null){
                                var img='../../img/logo (2).png';
                            }else{
                                var img=data[i].user.portrait
                            }
                            if(data[i].user.nickname==null){
                                if(data[i].user.realName==null){
                                    var name="猴姆教学"
                                }else{
                                    var name=data[i].user.realName
                                }
                            }else{
                                var name=data[i].user.nickname;
                            }
                            var time=timeT(data[i].commentsCourse.updateTime);
                            html+=`<li>
                            <div class="commentcontent">
                                    <div class="f_left comment-portrait">
                                    <img src="${img}" alt="" class="comment-portrait">
                                    </div>
                                    <div>
                                        ${name}
                                    </div>
                                    <div class="comment-time">
                                        ${time}
                                    </div>
                                    </div>
                                        <!--分享的文本-->
                                    <div class="comment-text">
                                        ${data[i].commentsCourse.body}
                                    </div>
                                    </li>`
                        }
                        $("#comment>nav>ul").html(html);

                    }
                }
            })
        }

        //分页的调用
        // 分页的调用
        var page=1;
        var pro=1;
        $(".Page>ul>li").click(function () {
            //console.log($(this));
            page=$(this)[0].innerText;
            // 判断page 的类型
            //console.log(page);//5
            if(typeof(parseInt(page)) =="number"&& !isNaN(parseInt(page))){
                /*是数字*/
                pro=page;
            }else{
                /*是分页*/
                if(page=="»"){
                    /*分页+*/
                    pro=parseInt(pro-0+1);
                    page=pro;

                }else {
                    /*分页-*/
                    pro=parseInt(pro-1);
                    page=pro;
                }
            }
            if(parseInt(page)<=0){
                page=1;
                pro=1;
            }
            console.log(page);
            video_comment(page);

        })
    })
</script>
</html>