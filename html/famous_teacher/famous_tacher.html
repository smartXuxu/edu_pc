<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>名师</title>
    <!-- Bootstrap -->
    <link href="../../css/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/lesson/lesson.css" rel="stylesheet">
    <link href="../../css/iconfont.css" rel="stylesheet">
</head>
<body>
<div class="layer">
    <div class="header"></div>
    <div class="main">
        <div class="modal-content">
            <div class="choose ">

                <div class="grade p_center">
                    <span>年级：</span>
                    <em class="active" data-grade="0">全部</em>
                    <em data-grade="1">一年级</em>
                    <em data-grade="2">二年级</em>
                    <em data-grade="3">三年级</em>
                    <em data-grade="4">四年级</em>
                    <em data-grade="5">五年级</em>
                    <em data-grade="6">六年级</em>
                    <em data-grade="7">初一</em>
                    <em data-grade="8">初二</em>
                    <em data-grade="9">初三</em>
                    <em data-grade="10">高一</em>
                    <em data-grade="11">高二</em>
                    <em data-grade="12">高三</em>
                </div>
                <div class="city p_center ">
                   <span>学科：</span>
                   <em class="active" data-city="0">全部</em>
                   <em data-city="1">数学</em>
                   <em data-city="2">英语</em>
                   <em data-city="3">政治</em>
                   <em data-city="4">历史</em>
                   <em data-city="5">地理</em>
                   <em data-city="6">物理</em>
                   <em data-city="7">化学</em>
                   <em data-city="8">生物</em>
                   <em data-city="9">科学</em>
                   <em data-city="10">品德</em>
                   <em data-city="12">美术</em>
                   <em data-city="13">音乐</em>
                   <em data-city="14">体育</em>
               </div>
            </div>
            <div class="recommend_teacher p_center">
                <h3 class="clearfix">推荐名师
                </h3>
                <div class="lists">
                    <ul class="clearfix">

                       <!-- <li>
                            <a href="./teacher_index.html">
                                <img src="../../img/focus-img1.png" alt=""/>
                                <p>富丽 <em class="iconfont icon-v"></em></p>
                                <div class="tec">广州师范大学附属中学</div>
                                <div class="lesson">
                                    <i>初一</i>
                                    <i>初二</i>
                                    <i>数学</i>
                                </div>
                               <div class="line">
                                   <em>主讲课程</em>
                               </div>
                                <div class="bottom">
                                    <img src="../../img/focus-img1.png" alt=""/>
                                <div class="b_r">
                                    <p>2018年初二数学下期课堂</p>
                                    <div class="info">
                                        <i class="iconfont icon-shipin">11</i>
                                        <i class="iconfont icon-wode2">11</i>
                                    </div>
                                </div>
                                </div>
                                <div class="more iconfont icon-more "></div>
                            </a>
                        </li>
                        <li>
                            <a href="./teacher_index.html">
                                <img src="../../img/focus-img1.png" alt=""/>
                                <p>富丽 <em class="iconfont icon-v"></em></p>
                                <div class="tec">广州师范大学附属中学</div>
                                <div class="lesson">
                                    <i>初一</i>
                                    <i>初二</i>
                                    <i>数学</i>
                                </div>
                               <div class="line">
                                   <em>主讲课程</em>
                               </div>
                                <div class="bottom">
                                    <img src="../../img/focus-img1.png" alt=""/>
                                <div class="b_r">
                                    <p>2018年初二数学下期课堂</p>
                                    <div class="info">
                                        <i class="iconfont icon-shipin">11</i>
                                        <i class="iconfont icon-wode2">11</i>
                                    </div>
                                </div>

                                </div>
                                <div class="more iconfont icon-more "></div>

                            </a>
                        </li>-->
                    </ul>
                    <nav aria-label="Page navigation" class="Page">
                        <ul class="pagination">
                            <li>
                                <a href="#" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <li><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            <li><a href="#">5</a></li>
                            <li>
                                <a href="#" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>


    </div>
    <div class="footer"></div>
</div>
</body>
<!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
<!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
<!--[if lt IE 9]>
<script src="../../js/bootstrap/html5shiv.main.js"></script>
<script src="../../js/bootstrap/respond.min.js"></script>
<![endif]-->
<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="../../js/jquery.min.js"></script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="../../js/bootstrap/bootstrap.min.js"></script>
<script src="../../js/base.js"></script>
<script src="../../js/template-web.js"></script>
<script src="../../js/template.js"></script>
<script type="text/html" id="teacher">
    {{if data ==null ||data.length==0}}
    <div class="no_in">对不起，暂时没有合适的教师推荐</div>
    {{else}}
    {{each data as value i}}
    <li>
        <a href="./teacher_index.html?id={{value.teacher.userid}}">
            <img src="{{value.teacher.portrait==null?'../../img/index_famous.png':value.teacher.portrait}}" alt=""/>
            <p>{{value.teacher.nickname==null?value.teacher.realName==null?"暂未设置":value.teacher.realName:value.teacher.nickname}} <em class="iconfont icon-v"></em></p>
            <div class="tec">{{value.schoolName}}</div>
            <div class="lesson">
                <i>{{value.teacher.grade}}</i>
                <i>{{value.teacher.teachingSubjects}}</i>

            </div>
            <!--<div class="line">
                <em>主讲课程</em>
            </div>
            <div class="bottom">
                <img src="../../img/focus-img1.png" alt=""/>
                <div class="b_r">
                    <p>{{value.teacher.grade}} {{value.teacher.teachingSubjects}}</p>
                    <div class="info">
                        <i class="iconfont icon-shipin">11</i>
                        <i class="iconfont icon-wode2">11</i>
                    </div>
                </div>
            </div>-->
            <div class="more iconfont icon-more "></div>
        </a>
    </li>
    {{/each}}
    {{/if}}
</script>

<script>
    $(function () {
        setTimeout(function () {
            $(".header").load("../common/header_logo.html");
            $(".footer").load("../common/footer.html");
           },100);
        setTimeout(function () {
            $("header>nav>ul>li:nth-of-type(4)").addClass("active").siblings().removeClass("active");
        },200);
        var grade;
        var teaching_subjects;
        var city=localStorage.getItem("pc_city");
        if(!city){
            city="郑州市";
        }
        $(".choose>.grade>em").click(function () {
            grade=$(this).text();
            $(this).addClass("active").siblings("em").removeClass("active");
            if(grade=="全部"&&teaching_subjects!=="全部"){
                Teaching_subjects(teaching_subjects,1)
            }else if(teaching_subjects=="全部"&&grade!=="全部"){
                Grade(grade,1)
            }else if(grade=="全部"&&teaching_subjects=="全部"){
                render(1);
            }else{
                Page(1,grade,teaching_subjects)
            }
        });
        $(".choose>.city>em").click(function () {
            teaching_subjects=$(this).text();
            $(this).addClass("active").siblings("em").removeClass("active");
            //获取全部的active 的值
            if(grade=="全部"&&teaching_subjects!=="全部"){
                Teaching_subjects(teaching_subjects,1)
            }else if(teaching_subjects=="全部"&&grade!=="全部"){
                Grade(grade,1)
            }else if(grade=="全部"&&teaching_subjects=="全部"){
                render(1);
            }else{
                Page(1,grade,teaching_subjects)
            }
        });
      /*  var str=[];
        $(".choose>div>.active").each(function(){
            str.push($(this).text());
        })*/
        //console.log(str);

        render(1);
        function render(page){
            myAjax({url:"/pc/other/get/teacher",data:{city:city,limit:8,page:page},type:"post"}, function (data) {
                console.log(data);
                if(data.status==200){
                    $(".recommend_teacher>.lists>ul").html(template("teacher",data));
                }
            })
        }
        /*page 是全部都有的*/
            function Page(page,grade,teaching_subjects){
            myAjax({url:"/pc/other/get/teacher",
                data:{city:city,limit:8,page:page,teaching_subjects:teaching_subjects,grade:grade},type:"post"},
                    function (data) {
                console.log(data);
                if(data.status==200){
                    $(".recommend_teacher>.lists>ul").html(template("teacher",data));
                }
            })
        }
        /*grsde 是subject没有的*/
        function Grade(grade,page){
            myAjax({url:"/pc/other/get/teacher",data:{city:city,limit:8,page:page,grade:grade},type:"post"}, function (data) {
                console.log(data);
                if(data.status==200){
                    $(".recommend_teacher>.lists>ul").html(template("teacher",data));
                }
            })
        }
        /*teaching_subjects */
        function Teaching_subjects(teaching_subjects,page){
            myAjax({url:"/pc/other/get/teacher",data:{city:city,limit:8,page:page,teaching_subjects:teaching_subjects},type:"post"}, function (data) {
                console.log(data);
                if(data.status==200){
                    $(".recommend_teacher>.lists>ul").html(template("teacher",data));
                }
            })
        }

        // 分页的调用
        var page=1;
        var pro=1;
        $(".Page>ul>li").click(function () {
            console.log($(this));
            page=$(this)[0].innerText;
            // 判断page 的类型
            //console.log(page);//5
            if(typeof(parseInt(page)) =="number"&& !isNaN(parseInt(page))){
                /*是数字*/
                pro=page;
            }else{
                /*是分页*/
                if(page=="»"){
                    /*分页+*/
                    pro=parseInt(pro-0+1);
                    page=pro;

                }else {
                    /*分页-*/
                    pro=parseInt(pro-1);
                    page=pro;
                }
            }
            if(parseInt(page)<=0){
                page=1;
                pro=1;
            }
            console.log(page);
            if(grade=="全部"&&teaching_subjects!=="全部"){
                Teaching_subjects(teaching_subjects,page)
            }else if(teaching_subjects=="全部"&&grade!=="全部"){
                Grade(grade,page)
            }else if(grade=="全部"&&teaching_subjects=="全部"){
                render(page);
            }else{
                Page(page,grade,teaching_subjects)
            }

        })

    })
</script>
</html>