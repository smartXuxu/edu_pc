<!DOCTYPE html>
<html>
<head lang="en">
    <link rel="shortcut icon " type="images/x-icon" href="../../ico.ico">

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>实名认证</title>
    <!-- Bootstrap -->
    <link href="../../css/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/iconfont.css" rel="stylesheet">
    <link href="../../css/upload/upload.css" rel="stylesheet">
    <link href="../../css/upload/auth.css" rel="stylesheet">
    <link href="../../css/sweetalert2.css" rel="stylesheet">
</head>
<body>
<div class="layer">
    <div class="header"></div>
    <div class="main">
      <div class="p_center clearfix">
          <div class="mine_left f_left">
              <div class="left_top">
                  <div class="box_img">
                  </div>
                 <div class="left_top_center">
                     <img src="../../img/focus-img1.png" alt=""/>
                     <h3>魏雨</h3>
                     <a href="javascript:;">个人中心</a>
                 </div>
              </div>
              <div class="left_middle">
                  <a href="./mine_study.html" > 学习中心</a>
                  <a href="./edu_manage.html"> 教务管理</a>
                  <a href="./message_manage.html"> 消息管理</a>
                  <a href="./mine_authentication.html"class="active"> 认证管理</a>
                  <a href="./account_manage.html"> 账号管理</a>

              </div>
              <div class="left_bottom">
                  <h3>意见反馈</h3>
                  <textarea placeholder="有话您说，我们在倾听..."></textarea>
                    <button>提交</button>
              </div>
          </div>
          <div class="mine_right f_right">
                <nav>
                    <span class="active" onclick="location.href='./mine_authentication.html'">实名认证</span>
                    <span onclick="location.href='./teacher_authentication.html'">教师认证</span>
                </nav>
              <!--实名认证-->
              <div class="right_center clearfix">
                  <div class="right_center_left f_left">
                      <p>1、实名认证可以提升您在猴姆的个人信息及虚拟产的安全等级,同时也能够更好的享受猴姆的各项服务;</p>

                      <p>2、我们将在您提交认证信息后的5个工作日(不包假日)内完成审核，审核结果将以短信和系统通知的形式发送给您;</p>

                      <p>3、实名认证审核后，将无法修改和删除，请谨慎填写;</p>

                      <p>4、实名认证审核完成后，系统将自动发放10分积分作为奖励;</p>

                      <p>5、我们会确保您所提供的信息均处于严格的保密，不会泄露;</p>

                     <p>6、如存在恶意乱填姓名、身份证号码及拍摄上传身份证证件无关的图片者，一经发现将冻结猴姆账号。</p>
                  </div>
                  <div class="right_center_right f_right">
                      <!--判断认证的状态 4种-->
                      <!--未认证-->
                      <div class="no_have">
                                <div class="realName">
                                <span>真实姓名：</span>
                                <input id='name' type="text" placeholder="请填写身份证上的姓名"/>
                            </div>
                            <div class="idCard">
                                <span>身份证号：</span>
                                <input type="text" id='Idcard' placeholder="请正确填写您的身份证号"/>
                            </div>
                    <div class="Id_photo">
                        <h3>上传身份证照片:</h3>
                        <div class="against">
                            <div class="against_box">
                                <input type="file" id="against" accept="image/*" capture="camera" />
                            </div>
                        </div>
                        <div class="open">
                            <div class="open_box">
                                <input type="file" id="just" accept="image/*" capture="camera"/>
                            </div>
                        </div>
                    </div>
                          <button class="submit">提交审核</button>
                      </div>
                      <!--&lt;!&ndash;认证未通过&ndash;&gt;
                        <div class="status_error">
                            <div class="status">
                                <em class="iconfont icon-cuo"></em>
                                <span>实名认证未通过！</span>

                            </div>
                            <div class="status_bottom">
                                <p>对不起，请核实你的信息</p>
                            </div>
                        </div>
                      &lt;!&ndash;认证已通过&ndash;&gt;
                      <div class="status_success">
                          <div class="status">
                              <em class="iconfont icon-dui"></em>
                                <span>实名认证成功!</span>
                          </div>
                          <div class="status_bottom">
                                <p>真实姓名： 赵亮</p>
                                <p>身份证号： 4**************X</p>
                          </div>
                         </div>
                      &lt;!&ndash;认证中&ndash;&gt;
                      <div class="status_ing">
                          <div class="status">
                              <em class="iconfont icon-dengdai"></em>
                              <span>实名认证中,请等待!</span>
                          </div>
                          <div class="status_bottom">
                              <p>请耐心等待5个工作日左右喔</p>
                          </div>
                      </div>
                  </div>-->
              </div>

          </div>
      </div>

    </div>
    <div class="footer"></div>
    </div>
</body>
<!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
<!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
<!--[if lt IE 9]>
<script src="../../js/bootstrap/html5shiv.main.js"></script>
<script src="../../js/bootstrap/respond.min.js"></script>
<![endif]-->
<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="../../js/jquery.min.js"></script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="../../js/bootstrap/bootstrap.min.js"></script>
<script src="../../js/base.js"></script>
<script src="../../js/sweetalert2.js"></script>
<script>
    /* 单个上传图片*/
    document.querySelector("#against").onchange=function () {
        var file=document.querySelector("#against").files;
        html5Reader(file,".against_box")

    }
    document.querySelector("#just").onchange=function () {
        var file=document.querySelector("#just").files;
        html5Reader(file,".open_box")

    }

    function html5Reader(file,ele){
        //var file = file.files[0];
        var reader = new FileReader();
        // reader.readAsDataURL(file);
        reader.readAsDataURL(file[0]);
        reader.onload = function(e){
            var pic = document.querySelector(ele);
            // console.log(reader.result);
            pic.style.backgroundImage="url("+reader.result+")";
        }
    }
    $(function () {
        $(".header").load("../common/header_logo.html");
        $(".footer").load("../common/footer.html");
        setTimeout(function () {
            $("header>nav>ul>li:nth-of-type(6)").addClass("active").siblings().removeClass("active");
        },100)
        $(".submit").click(function () {
            var name=$("#name").val().trim();
            if(name==""){
                sweetAlert(
                        "sorry",
                        "请您填写您的姓名",
                        "error"
                )
                return false;
            }else{
                name=name;
            }
            var idCardNumber=$("#Idcard").val();
            //身份证
            isCardNo(idCardNumber);
            //验证 身份证号
            function isCardNo(card)
            {
                // 身份证号码为15位或者18位，15位时全为数字，18位前17位为数字，最后一位是校验位，可能为数字或字符X
                var reg = /(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
                if(reg.test(card) === false)
                {
                    sweetAlert(
                            "sorry",
                            "您的身份证输入不合法",
                            "error"
                    ).then(function () {
                                $("#Idcard").val("");
                            })
                    return false;
                }
            }
            var base64IdCardBack=$(".against_box").css('backgroundImage').replace('url(','').replace(')','');
            //console.log(base64IdCardBack);
            if(base64IdCardBack.replace(/\"/g,"").match("img/against.png")){
                //if(base64IdCardBack.replace(/\"/g,"") =="http://localhost:63342/MU/img/against.png"){
                base64IdCardBack="";
            }else{
                base64IdCardBack=base64IdCardBack.replace(/"/g,"");
            }
        })
    })
</script>
</html>