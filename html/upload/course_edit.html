<!DOCTYPE html>
<html>
<head lang="en">
    <link rel="shortcut icon " type="images/x-icon" href="../../ico.ico">

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>教务 管理</title>
    <!-- Bootstrap -->
    <link href="../../css/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/upload/edu_manage.css" rel="stylesheet">
    <link href="../../css/upload/course_edit.css" rel="stylesheet">
</head>
<body>
<div class="layer">
    <div class="header"></div>
    <div class="main">
        <div class="p_center clearfix">
            <div class="mine_left f_left">
                <div class="left_top">
                    <div class="box_img">
                    </div>
                    <div class="left_top_center">
                        <img src="../../img/focus-img1.png" alt=""/>
                        <h3>魏雨</h3>
                        <a href="javascript:;">个人中心</a>
                    </div>
                </div>
                <div class="left_middle">
                    <a href="../upload/mine_study.html" > 学习中心</a>
                    <a href="../upload/edu_manage.html"> 教务管理</a>
                    <a href="../upload/message_manage.html"> 消息管理</a>
                    <a href="../upload/mine_authentication.html"> 认证管理</a>
                    <a href="../upload/account_manage.html"> 账号管理</a>

                </div>
                <div class="left_bottom">
                    <h3>意见反馈</h3>
                    <textarea placeholder="有话您说，我们在倾听..."></textarea>
                    <button>提交</button>
                </div>
            </div>
            <div class="mine_right f_left">
                <div class="process">
                    流程：
                    <a href="./upload.html">上传视频</a>→
                    <a href="./created_lesson.html">创建课时</a>→
                    <a href="./edu_manage.html" >纳入（创建）课程</a>→
                    <a href="course_edit.html" class="active">课程编辑</a>→
                    <a href="javascript:;">发布课程</a>→
                    <a href="javascript:;">结课，停止更新</a>
                </div>
                <div class="course_edit_content">
                    <h2>2018年高三数学上期</h2>
                    <p>发布于 2018年2月23日 16:02</p>
                    <!--我删除了取消发布的按钮 app端 好像没有-->
                    <!--判断 是否结课-->
                    <div class="end_class session">
                       进行结课
                    </div>
                    <div id="mask"></div>
                    <div id="session">
                        <h3>结课状态的课程将禁止继续上架课时</h3>
                        <div class="radio_button">
                            <button class="quit">取消</button>
                            <button class="confirm">确定</button>
                        </div>
                    </div>
                    <div class="put_way">

                         <div class="no_putway">
                             <p class="clearfix">
                                 <span class="put_way">2个课时未上架</span>

                                 <i class="f_right show" >
                                     创建课时
                                 </i>
                             </p>
                             <p class="clearfix status">
                                 <span>2018.02.23</span>
                                 <em class="blue">AAAAAAAAAAAA</em>
                                 <i class="f_right red">
                                     上  架
                                 </i>
                             </p>
                             <p class="clearfix status">
                                 <span>2018.02.23</span>
                                 <em class="blue">名称名称名称名称</em>
                                 <i class="f_right red">
                                     上  架
                                 </i>
                             </p>
                         </div>
                         <div class="has_put_way">
                             <h3 class="clearfix">已上架 <s>10</s> 个课时
                                 <em class="f_right">上架日期</em>
                             </h3>
                             <p>
                                 <del data-id="1"></del>
                                 <span>第1课  相交线第1课  相交线第1课  相交线第1课  相交线第1课  相交线</span>
                                 <i class="f_right">2018.10.30 10:32</i>
                             </p>
                             <p>
                                 <del data-id="2"></del>
                                 <span>第1课  相交线</span>
                                 <i class="f_right">2018.10.30 10:32</i>
                             </p>
                             <p>
                                 <del data-id="3"></del>
                                 <span>第1课  相交线</span>
                                 <i class="f_right">2018.10.3 10:32</i>
                             </p>
                             <div class="operation">
                                 <button class="all_choose">全选</button>
                                 <button class="sold_out">下架</button>
                             </div>
                         </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="footer"></div>
</div>
</body>
<!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
<!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
<!--[if lt IE 9]>
<script src="../../js/bootstrap/html5shiv.main.js"></script>
<script src="../../js/bootstrap/respond.min.js"></script>
<![endif]-->
<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="../../js/jquery.min.js"></script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="../../js/bootstrap/bootstrap.min.js"></script>
<script src="../../js/base.js"></script>
<script src="../../js/sweetalert2.js"></script>
<script>
    $(function () {
        $(".header").load("../common/header_logo.html");
        $(".footer").load("../common/footer.html");
        setTimeout(function () {
            $(".left_middle>a:nth-of-type(2)").addClass("active");
        },100);

        console.log($('.grade option:selected').text());
       /* $(".confirm").click(function () {
            location.href='./created_lesson.html'
        })*/
        /*结课*/
        $(".session").click(function () {
            $("#mask").show();
            $("#session").show();
        });
        $(".quit").click(function () {
            $("#mask").hide();
            $("#session").hide();
        })
        $(".confirm").click(function () {
            /*确定结课*/
            $("#mask").hide();
            $("#session").hide();
        })
        /*全选*/
        var all_choose=true;
        $(".put_way").on("click",".all_choose", function () {
            if(all_choose){
                $(".has_put_way>p>del").text("√");
                $(".has_put_way>p>del").addClass("active");
                all_choose=false;
            }else{
                $(".has_put_way>p>del").text("");
                $(".has_put_way>p>del").removeClass("active");
                all_choose=true;
            }
        })
        /*单选 下架*/
        var falg=true;
        $(".put_way").on("click",".has_put_way>p", function () {
            if(falg){
                $(this).children("del").text("√");
                $(this).children("del").addClass("active");
                falg=false;
            }else{
                $(this).children("del").text("");
                $(this).children("del").removeClass("active");
                falg=true;
            }
        })

        var str=[];
        $(".put_way").on("click",".sold_out", function () {
            var active=$(".active");
            for(var i=0;i<active.length;i++){
                //console.log($(".active")[i]);
                var that=active[i];
                str.push(that.getAttribute("data-id"));
            }
            console.log(str);
            if(str.length==0){
                sweetAlert(
                        "sorry",
                        "请您选择要下架的课时",
                        "error"
                )
                return false;
            }else{
                str=str.join(",")
                console.log(str);
                myAjax({url:"/course/related/update/Period/LowerShelf",data:{periodids:str},type:"post"}, function (data) {
                    console.log(data);
                    if(data.status==200){
                        list(courseid);
                    }
                })

            }

        })

    })


</script>
</html>